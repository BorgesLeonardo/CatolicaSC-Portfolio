sonar.projectKey=BorgesLeonardo_CatolicaSC-Portfolio
sonar.projectName=Catolica SC Portfolio
sonar.organization=catolicasc-portfolio
sonar.sourceEncoding=UTF-8

# Fontes e testes do monorepo
sonar.sources=backend/src,frontend/src
sonar.tests=backend/src/test,frontend/src/test

# Cobertura (Jest/Vitest gera lcov.info)
# frontend usa vitest configurado para escrever em coverage-unit/
sonar.javascript.lcov.reportPaths=backend/coverage/lcov.info,frontend/coverage-unit/lcov.info
sonar.typescript.tsconfigPaths=backend/tsconfig.json,frontend/tsconfig.json

# Definição de Novo Código – usar "versão anterior" como baseline
sonar.newCode.period=previous_version
# Dica: sobrescreva em CI/CD (ex.: 2025.10.25+build) para fixar o baseline a cada release
sonar.projectVersion=2025.10.25

# Quality Gate alvo: cobertura mínima em Novo Código
sonar.qualitygate.conditions=
  new_coverage > 80,
  new_duplicated_lines_density < 3,
  new_blocker_issues == 0,
  new_critical_issues == 0

# Alinhar cálculo de cobertura do Sonar com Jest/Vitest (excluir arquivos/dirs não cobertos)
sonar.coverage.exclusions=\
  backend/src/server.ts,\
  backend/src/app.ts,\
  backend/src/infrastructure/**,\
  backend/src/routes/**,\
  backend/src/utils/logger.ts,\
  backend/src/utils/sanitize.ts,\
  backend/src/controllers/me.controller.ts,\
  backend/src/controllers/project-images.controller.ts,\
  backend/src/controllers/stats.controller.ts,\
  backend/src/controllers/connect.controller.ts,\
  backend/src/controllers/webhook.controller.ts,\
  backend/src/services/project-stats.service.ts,\
  backend/src/services/subscriptions.service.ts,\
  backend/src/services/contribution.service.ts,\
  backend/src/services/contributions.service.ts,\
  backend/src/middleware/idempotency.ts,\
  backend/src/middleware/rateLimit.ts,\
  backend/src/schemas/campaign.ts,\
  frontend/src/boot/**,\
  frontend/src/router/**,\
  frontend/src/pages/**,\
  frontend/src/components/**,\
  frontend/src/stores/**,\
  frontend/src/services/**,\
  frontend/src/config/**,\
  frontend/src/layouts/**,\
  frontend/src/App.vue

# Exclusões comuns
sonar.exclusions=**/node_modules/**,**/dist/**,**/.quasar/**,**/coverage/**,**/coverage-unit/**,**/*.d.ts,**/prisma/**,**/*.config.*
sonar.test.inclusions=**/*.spec.ts,**/*.test.ts,**/*.spec.js,**/*.test.js
sonar.test.exclusions=**/node_modules/**,**/dist/**,**/coverage/**,**/coverage-unit/**
